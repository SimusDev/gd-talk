[gd_scene format=3 uid="uid://dea6at3bh55ws"]

[ext_resource type="Script" uid="uid://851bhpxqx0n8" path="res://addons/simusdev/localization/SD_RichTextLabelSimple.gd" id="2_ol18t"]

[sub_resource type="GDScript" id="GDScript_k3y1v"]
resource_name = "script"
script/source = "@tool
extends Control

signal setting_icon_change
signal setting_name_change

@export var content_prefab:PackedScene

@export var setting_icon:Texture :
	set(new_icon):
		setting_icon = new_icon
		setting_icon_change.emit()
		_update_icon()

@export var setting_name:String :
	set(new_name):
		setting_name = new_name
		setting_name_change.emit()
		_update_name()

@onready var button = $Button
@onready var icon_texture_rect: TextureRect = $Icon
@onready var name_label: SD_RichTextLabelSimple = $NameLabel

@export var content_container:Control

func _update() -> void:
	_update_icon()
	_update_name()

func _update_icon() -> void:
	if not is_node_ready():
		await ready
	icon_texture_rect.texture = setting_icon

func _update_name() -> void:
	if not is_node_ready():
		await ready
	name_label.text = setting_name

func update_container_content() -> void:
	if content_container and content_prefab:
		for c in content_container.get_children():
			c.remove_child(c)
			c.queue_free()
	var new_content:Node = content_prefab.instantiate()
	content_container.add_child(new_content)

func _ready() -> void:
	_update()
	button.pressed.connect(_on_button_pressed)

func _on_button_pressed() -> void:
	update_container_content()
"

[node name="UISetting" type="Control" unique_id=309138313]
custom_minimum_size = Vector2(248, 40)
layout_mode = 3
anchors_preset = 0
script = SubResource("GDScript_k3y1v")

[node name="Button" type="Button" parent="." unique_id=180922199]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Icon" type="TextureRect" parent="." unique_id=1141738711]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.016
anchor_top = 0.5
anchor_right = 0.016
anchor_bottom = 0.504
offset_left = 0.031999826
offset_top = -15.8480015
offset_right = 32.032
offset_bottom = 15.992001
grow_vertical = 2
expand_mode = 1
stretch_mode = 5

[node name="NameLabel" type="RichTextLabel" parent="." unique_id=488862830]
layout_mode = 0
anchor_left = 0.14516129
anchor_top = 0.0038000108
anchor_right = 1.0
anchor_bottom = 1.0038
mouse_filter = 2
theme_override_font_sizes/normal_font_size = 16
bbcode_enabled = true
scroll_active = false
shortcut_keys_enabled = false
horizontal_alignment = 1
vertical_alignment = 1
script = ExtResource("2_ol18t")
metadata/_custom_type_script = "uid://851bhpxqx0n8"
metadata/_edit_use_anchors_ = true
